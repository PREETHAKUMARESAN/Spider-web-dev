<!DOCTYPE html>
<html>
<head>
<title>Memory Game</title>
</head>

<body>
<div id="memoryGame"></div>
</body>

<style>

#memoryGame
{
	padding-left:360px;
	padding-top:20px;
	width:660px;
	height:380px;
}

#memoryGame > div
{
	background:url(memory1.png) no-repeat;
	border:#000 2px solid;
	cursor:pointer;
	width:87px;
	height:87px;
	font-size:64px;
	text-align:center;
	float:left;
	margin:10px;
	padding:20px;
	
}
</style>
<script>

var noflippedtiles = 0;
var array = ['P','P','Q','Q','R','R','S','S','T','T','U','U','M','M','K','K'];
var values = [];
var tileID = [];
var score=0;


function boardChange()
{
	noflippedtiles = 0;
	var output = '';
    array.tileShuffle();
	for(var i = 0; i < array.length; i++)
	{
		output = output + '<div id="tile_'+i+'" onclick="flipTiles(this,\''+array[i]+'\')"></div>';
	}
	document.getElementById('memoryGame').innerHTML = output;
}

Array.prototype.tileShuffle = function()
{
    var i = this.length, j, temp;
    while(--i > 0)
	{
        j = Math.floor(Math.random() * (i+1));
        temp = this[j];
        this[j] = this[i];
        this[i] = temp;
    }
}
function flipTiles(tile,val)
{
	if(tile.innerHTML == "" && values.length < 2)
	{
		tile.style.background = '#006699';
		tile.innerHTML = val;
		
		if(values.length == 0)
		{
			values.push(val);
			tileID.push(tile.id);
		}
    	  else 
		     if(values.length == 1)
		{
			   values.push(val);
			   tileID.push(tile.id);
			     if(values[0] == values[1])
			{
				   noflippedtiles += 2; score++;
				
				   values = [];
            	   tileID = [];
				
				if(noflippedtiles == array.length)
				{
					alert('Congrats! U Have cleared the board. Your score is '+score);
					alert('lets play again :)');
					document.getElementById('memoryGame').innerHTML = "";
					boardChange();
				}
				
			} 
			else 
		    {
				 function flipIfNoMatch()
				{
				    
				    var tile_1 = document.getElementById(tileID[0]);
				    var tile_2 = document.getElementById(tileID[1]);
				    tile_1.style.background ='url(memory1.png) no-repeat';
            	    tile_1.innerHTML = "";
				    tile_2.style.background ='url(memory1.png) no-repeat';
            	    tile_2.innerHTML = "";
				    values = [];
            	    tileID = [];
				}
				
				setTimeout(flipIfNoMatch, 500);
				
			}
		}
	}

}

</script>
</head>

<script>boardChange();</script>

</html>